"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[394],{5113:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(6824).default,a=o(r(889)),s=o(r(8958)),i=o(r(7247)),u=o(r(3953)),l=o(r(1887)),c=o(r(7931)),_=["componentRef"],f=["componentRef","__relayContext","__rootIsQueryRenderer"],h=["componentRef","__relayContext","__rootIsQueryRenderer"],d=r(4948),p=r(1572),v=r(2186),m=v.getComponentName,C=v.getContainerName,b=r(8304),y=r(5486),S=r(1625).assertRelayContext,g=r(2588),R=r(9990),F=r(7342),A=r(5289),E=A.ConnectionInterface,I=A.Observable,N=A.RelayFeatureFlags,O=A.createFragmentSpecResolver,P=A.createOperationDescriptor,x=A.getDataIDsFromObject,U=A.getRequest,D=A.getVariablesFromObject,M=A.isScalarAndEqual,T=(r(575),"forward");function q(e){return"function"==typeof e?{error:e,complete:e,unsubscribe:function(t){"function"==typeof e&&e()}}:e||{}}e.exports={createContainer:function(e,t,r){return d(e,t,(function(e,t){return function(e,t,r){m(e);var o,d=C(e),v=function(e){var t=null,r=!1;for(var n in e){var o=e[n],a=o.metadata&&o.metadata.connection;void 0!==o.metadata&&(r=!0),a&&(1!==a.length&&R(!1),t&&R(!1),t=(0,c.default)((0,c.default)({},a[0]),{},{fragmentName:n}))}return r&&null===t&&R(!1),t||{}}(t),A=r.getConnectionFromProps||function(e){var t=e.path;return t||R(!1),function(r){for(var o=r[e.fragmentName],a=0;a<t.length;a++){if(!o||"object"!==n(o))return null;o=o[t[a]]}return o}}(v),B=r.direction||v.direction;B||R(!1);var L=r.getFragmentVariables||function(e){var t=e.count;return t||R(!1),function(e,r){return(0,c.default)((0,c.default)({},e),{},(0,l.default)({},t,r))}}(v);return o=function(o){function v(e){var r,n;n=o.call(this,e)||this,(0,l.default)((0,i.default)(n),"_handleFragmentDataUpdate",(function(){n.setState({data:n._resolver.resolve()})})),(0,l.default)((0,i.default)(n),"_hasMore",(function(){var e=n._getConnectionData();return!!(e&&e.hasMore&&e.cursor)})),(0,l.default)((0,i.default)(n),"_isLoading",(function(){return!!n._refetchSubscription})),(0,l.default)((0,i.default)(n),"_refetchConnection",(function(e,t,r){if(!n._canFetchPage("refetchConnection"))return{dispose:function(){}};n._refetchVariables=r;var o={count:e,cursor:null,totalCount:e};return{dispose:n._fetchPage(o,q(t),{force:!0}).unsubscribe}})),(0,l.default)((0,i.default)(n),"_loadMore",(function(e,t,r){if(!n._canFetchPage("loadMore"))return{dispose:function(){}};var o=q(t),a=n._getConnectionData();if(!a)return I.create((function(e){return e.complete()})).subscribe(o),null;var s=a.edgeCount+e;if(r&&r.force)return n._refetchConnection(s,t);var i=E.get(),u=(i.END_CURSOR,i.START_CURSOR,{count:e,cursor:a.cursor,totalCount:s});return{dispose:n._fetchPage(u,o,r).unsubscribe}}));var a=S(e.__relayContext),s=null!==(r=e.__rootIsQueryRenderer)&&void 0!==r&&r;return n._isARequestInFlight=!1,n._refetchSubscription=null,n._refetchVariables=null,!0===N.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT?n._resolver=O(a,d,t,e,s):n._resolver=O(a,d,t,e,s,n._handleFragmentDataUpdate),n.state={data:n._resolver.resolve(),prevContext:a,contextForChildren:a,relayProp:n._buildRelayProp(a),resolverGeneration:0},n._isUnmounted=!1,n._hasFetched=!1,n}(0,u.default)(v,o);var m=v.prototype;return m.componentDidMount=function(){this._isUnmounted=!1,!0===N.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT&&this._subscribeToNewResolverAndRerenderIfStoreHasChanged()},m.componentDidUpdate=function(e,t){!0===N.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT&&(t.resolverGeneration!==this.state.resolverGeneration?this._subscribeToNewResolverAndRerenderIfStoreHasChanged():this._rerenderIfStoreHasChanged())},m.UNSAFE_componentWillReceiveProps=function(e){var r,n=this,o=S(e.__relayContext),a=null!==(r=e.__rootIsQueryRenderer)&&void 0!==r&&r,s=x(t,this.props),i=x(t,e),u=p(t,this.props),l=p(t,e);o.environment===this.state.prevContext.environment&&g(u,l)&&g(s,i)?this._hasFetched||this._resolver.setProps(e):(this._cleanup(),!0===N.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT?this._resolver=O(o,d,t,e,a):this._resolver=O(o,d,t,e,a,this._handleFragmentDataUpdate),this.setState((function(e){return{prevContext:o,contextForChildren:o,relayProp:n._buildRelayProp(o),resolverGeneration:e.resolverGeneration+1}})));var c=this._resolver.resolve();c!==this.state.data&&this.setState({data:c})},m.componentWillUnmount=function(){this._isUnmounted=!0,this._cleanup()},m.shouldComponentUpdate=function(e,r){if(r.data!==this.state.data||r.relayProp!==this.state.relayProp||r.resolverGeneration!==this.state.resolverGeneration)return!0;for(var n=Object.keys(e),o=0;o<n.length;o++){var a=n[o];if("__relayContext"===a){if(r.prevContext.environment!==this.state.prevContext.environment)return!0}else if(!t.hasOwnProperty(a)&&!M(e[a],this.props[a]))return!0}return!1},m._buildRelayProp=function(e){return{hasMore:this._hasMore,isLoading:this._isLoading,loadMore:this._loadMore,refetchConnection:this._refetchConnection,environment:e.environment}},m._rerenderIfStoreHasChanged=function(){var e=this.state.data,t=this._resolver.resolve();e!==t&&this.setState({data:t})},m._subscribeToNewResolverAndRerenderIfStoreHasChanged=function(){var e=this.state.data,t=this._resolver.resolve();this._resolver.setCallback(this.props,this._handleFragmentDataUpdate),e!==t&&this.setState({data:t})},m._getConnectionData=function(){var e=this.props,t=(e.componentRef,(0,s.default)(e,_)),r=(0,c.default)((0,c.default)({},t),this.state.data),o=A(r);if(null==o)return null;var a=E.get(),i=a.EDGES,u=a.PAGE_INFO,l=a.HAS_NEXT_PAGE,f=a.HAS_PREV_PAGE,h=a.END_CURSOR,d=a.START_CURSOR;"object"!==n(o)&&R(!1);var p=o[i],v=o[u];if(null==p||null==v)return null;Array.isArray(p)||R(!1),"object"!==n(v)&&R(!1);var m=B===T?v[l]:v[f],C=B===T?v[h]:v[d];return"boolean"!=typeof m||0!==p.length&&void 0===C?null:{cursor:C,edgeCount:p.length,hasMore:m}},m._getQueryFetcher=function(){return this._queryFetcher||(this._queryFetcher=new y),this._queryFetcher},m._canFetchPage=function(e){return!this._isUnmounted},m._fetchPage=function(e,o,a){var i,u=this,l=S(this.props.__relayContext).environment,_=this.props,h=(_.componentRef,_.__relayContext,_.__rootIsQueryRenderer,(0,s.default)(_,f)),d=(0,c.default)((0,c.default)({},h),this.state.data),v=p(t,h);i=D(t,h),i=(0,c.default)((0,c.default)((0,c.default)({},v),i),this._refetchVariables);var m=r.getVariables(d,{count:e.count,cursor:e.cursor},i);("object"!==n(m)||null===m)&&R(!1),m=(0,c.default)((0,c.default)({},m),this._refetchVariables),i=(0,c.default)((0,c.default)({},m),i);var C=a?{force:!!a.force}:void 0;null!=C&&null!=(null==a?void 0:a.metadata)&&(C.metadata=null==a?void 0:a.metadata);var b=U(r.query),y=P(b,m,C),F=null;this._refetchSubscription&&this._refetchSubscription.unsubscribe(),this._hasFetched=!0;var A=function(){u._refetchSubscription===F&&(u._refetchSubscription=null,u._isARequestInFlight=!1)};return this._isARequestInFlight=!0,F=this._getQueryFetcher().execute({environment:l,operation:y,preservePreviousReferences:!0}).mergeMap((function(t){return I.create((function(t){!function(t,r){var n=u._resolver.resolve();u._resolver.setVariables(L(i,e.totalCount),y.request.node);var o=u._resolver.resolve();g(n,o)?r():u.setState({data:o,contextForChildren:{environment:u.props.__relayContext.environment}},r)}(0,(function(){t.next(),t.complete()}))}))})).do({error:A,complete:A,unsubscribe:A}).subscribe(o||{}),this._refetchSubscription=this._isARequestInFlight?F:null,F},m._cleanup=function(){this._resolver.dispose(),this._refetchVariables=null,this._hasFetched=!1,this._refetchSubscription&&(this._refetchSubscription.unsubscribe(),this._refetchSubscription=null,this._isARequestInFlight=!1),this._queryFetcher&&this._queryFetcher.dispose()},m.render=function(){var t=this.props,r=t.componentRef,n=(t.__relayContext,t.__rootIsQueryRenderer,(0,s.default)(t,h));return F.createElement(b.Provider,{value:this.state.contextForChildren},F.createElement(e,(0,a.default)({},n,this.state.data,{ref:r,relay:this.state.relayProp})))},v}(F.Component),(0,l.default)(o,"displayName",d),o}(e,t,r)}))}}}}]);
//# sourceMappingURL=ReactRelayPaginationContainer.js.js.map?7b706