"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[394],{9432:(e,t,r)=>{var n=r(1600).default,o=n(r(4963)),a=n(r(5538)),s=n(r(5297)),i=n(r(6531)),u=n(r(6290)),l=n(r(814)),c=["componentRef"],_=["componentRef","__relayContext","__rootIsQueryRenderer"],h=["componentRef","__relayContext","__rootIsQueryRenderer"],f=r(6599),d=r(2775),p=r(7352),v=p.getComponentName,C=p.getContainerName,m=r(3988),b=r(2907),g=r(4227).assertRelayContext,R=r(3860),y=r(7677),S=r(2784),F=r(3383),A=F.ConnectionInterface,E=F.Observable,I=F.RelayFeatureFlags,N=F.createFragmentSpecResolver,O=F.createOperationDescriptor,P=F.getDataIDsFromObject,x=F.getRequest,U=F.getVariablesFromObject,D=F.isScalarAndEqual,M=(r(6590),"forward");function T(e){return"function"==typeof e?{error:e,complete:e,unsubscribe:function(t){"function"==typeof e&&e()}}:e||{}}e.exports={createContainer:function(e,t,r){return f(e,t,(function(e,t){return function(e,t,r){v(e);var n,f=C(e),p=function(e){var t=null,r=!1;for(var n in e){var o=e[n],a=o.metadata&&o.metadata.connection;void 0!==o.metadata&&(r=!0),a&&(1!==a.length&&y(!1),t&&y(!1),t=(0,l.default)((0,l.default)({},a[0]),{},{fragmentName:n}))}return r&&null===t&&y(!1),t||{}}(t),F=r.getConnectionFromProps||function(e){var t=e.path;return t||y(!1),function(r){for(var n=r[e.fragmentName],o=0;o<t.length;o++){if(!n||"object"!=typeof n)return null;n=n[t[o]]}return n}}(p),q=r.direction||p.direction;q||y(!1);var B=r.getFragmentVariables||function(e){var t=e.count;return t||y(!1),function(e,r){return(0,l.default)((0,l.default)({},e),{},(0,u.default)({},t,r))}}(p);return n=function(n){function p(e){var r,o;o=n.call(this,e)||this,(0,u.default)((0,s.default)(o),"_handleFragmentDataUpdate",(function(){o.setState({data:o._resolver.resolve()})})),(0,u.default)((0,s.default)(o),"_hasMore",(function(){var e=o._getConnectionData();return!!(e&&e.hasMore&&e.cursor)})),(0,u.default)((0,s.default)(o),"_isLoading",(function(){return!!o._refetchSubscription})),(0,u.default)((0,s.default)(o),"_refetchConnection",(function(e,t,r){if(!o._canFetchPage("refetchConnection"))return{dispose:function(){}};o._refetchVariables=r;var n={count:e,cursor:null,totalCount:e};return{dispose:o._fetchPage(n,T(t),{force:!0}).unsubscribe}})),(0,u.default)((0,s.default)(o),"_loadMore",(function(e,t,r){if(!o._canFetchPage("loadMore"))return{dispose:function(){}};var n=T(t),a=o._getConnectionData();if(!a)return E.create((function(e){return e.complete()})).subscribe(n),null;var s=a.edgeCount+e;if(r&&r.force)return o._refetchConnection(s,t);var i=A.get(),u=(i.END_CURSOR,i.START_CURSOR,{count:e,cursor:a.cursor,totalCount:s});return{dispose:o._fetchPage(u,n,r).unsubscribe}}));var a=g(e.__relayContext),i=null!==(r=e.__rootIsQueryRenderer)&&void 0!==r&&r;return o._isARequestInFlight=!1,o._refetchSubscription=null,o._refetchVariables=null,!0===I.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT?o._resolver=N(a,f,t,e,i):o._resolver=N(a,f,t,e,i,o._handleFragmentDataUpdate),o.state={data:o._resolver.resolve(),prevContext:a,contextForChildren:a,relayProp:o._buildRelayProp(a),resolverGeneration:0},o._isUnmounted=!1,o._hasFetched=!1,o}(0,i.default)(p,n);var v=p.prototype;return v.componentDidMount=function(){this._isUnmounted=!1,!0===I.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT&&this._subscribeToNewResolverAndRerenderIfStoreHasChanged()},v.componentDidUpdate=function(e,t){!0===I.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT&&(t.resolverGeneration!==this.state.resolverGeneration?this._subscribeToNewResolverAndRerenderIfStoreHasChanged():this._rerenderIfStoreHasChanged())},v.UNSAFE_componentWillReceiveProps=function(e){var r,n=this,o=g(e.__relayContext),a=null!==(r=e.__rootIsQueryRenderer)&&void 0!==r&&r,s=P(t,this.props),i=P(t,e),u=d(t,this.props),l=d(t,e);o.environment===this.state.prevContext.environment&&R(u,l)&&R(s,i)?this._hasFetched||this._resolver.setProps(e):(this._cleanup(),!0===I.ENABLE_CONTAINERS_SUBSCRIBE_ON_COMMIT?this._resolver=N(o,f,t,e,a):this._resolver=N(o,f,t,e,a,this._handleFragmentDataUpdate),this.setState((function(e){return{prevContext:o,contextForChildren:o,relayProp:n._buildRelayProp(o),resolverGeneration:e.resolverGeneration+1}})));var c=this._resolver.resolve();c!==this.state.data&&this.setState({data:c})},v.componentWillUnmount=function(){this._isUnmounted=!0,this._cleanup()},v.shouldComponentUpdate=function(e,r){if(r.data!==this.state.data||r.relayProp!==this.state.relayProp||r.resolverGeneration!==this.state.resolverGeneration)return!0;for(var n=Object.keys(e),o=0;o<n.length;o++){var a=n[o];if("__relayContext"===a){if(r.prevContext.environment!==this.state.prevContext.environment)return!0}else if(!t.hasOwnProperty(a)&&!D(e[a],this.props[a]))return!0}return!1},v._buildRelayProp=function(e){return{hasMore:this._hasMore,isLoading:this._isLoading,loadMore:this._loadMore,refetchConnection:this._refetchConnection,environment:e.environment}},v._rerenderIfStoreHasChanged=function(){var e=this.state.data,t=this._resolver.resolve();e!==t&&this.setState({data:t})},v._subscribeToNewResolverAndRerenderIfStoreHasChanged=function(){var e=this.state.data,t=this._resolver.resolve();this._resolver.setCallback(this.props,this._handleFragmentDataUpdate),e!==t&&this.setState({data:t})},v._getConnectionData=function(){var e=this.props,t=(e.componentRef,(0,a.default)(e,c)),r=(0,l.default)((0,l.default)({},t),this.state.data),n=F(r);if(null==n)return null;var o=A.get(),s=o.EDGES,i=o.PAGE_INFO,u=o.HAS_NEXT_PAGE,_=o.HAS_PREV_PAGE,h=o.END_CURSOR,f=o.START_CURSOR;"object"!=typeof n&&y(!1);var d=n[s],p=n[i];if(null==d||null==p)return null;Array.isArray(d)||y(!1),"object"!=typeof p&&y(!1);var v=q===M?p[u]:p[_],C=q===M?p[h]:p[f];return"boolean"!=typeof v||0!==d.length&&void 0===C?null:{cursor:C,edgeCount:d.length,hasMore:v}},v._getQueryFetcher=function(){return this._queryFetcher||(this._queryFetcher=new b),this._queryFetcher},v._canFetchPage=function(e){return!this._isUnmounted},v._fetchPage=function(e,n,o){var s,i=this,u=g(this.props.__relayContext).environment,c=this.props,h=(c.componentRef,c.__relayContext,c.__rootIsQueryRenderer,(0,a.default)(c,_)),f=(0,l.default)((0,l.default)({},h),this.state.data),p=d(t,h);s=U(t,h),s=(0,l.default)((0,l.default)((0,l.default)({},p),s),this._refetchVariables);var v=r.getVariables(f,{count:e.count,cursor:e.cursor},s);("object"!=typeof v||null===v)&&y(!1),v=(0,l.default)((0,l.default)({},v),this._refetchVariables),s=(0,l.default)((0,l.default)({},v),s);var C=o?{force:!!o.force}:void 0;null!=C&&null!=(null==o?void 0:o.metadata)&&(C.metadata=null==o?void 0:o.metadata);var m=x(r.query),b=O(m,v,C),S=null;this._refetchSubscription&&this._refetchSubscription.unsubscribe(),this._hasFetched=!0;var F=function(){i._refetchSubscription===S&&(i._refetchSubscription=null,i._isARequestInFlight=!1)};return this._isARequestInFlight=!0,S=this._getQueryFetcher().execute({environment:u,operation:b,preservePreviousReferences:!0}).mergeMap((function(t){return E.create((function(t){!function(t,r){var n=i._resolver.resolve();i._resolver.setVariables(B(s,e.totalCount),b.request.node);var o=i._resolver.resolve();R(n,o)?r():i.setState({data:o,contextForChildren:{environment:i.props.__relayContext.environment}},r)}(0,(function(){t.next(),t.complete()}))}))})).do({error:F,complete:F,unsubscribe:F}).subscribe(n||{}),this._refetchSubscription=this._isARequestInFlight?S:null,S},v._cleanup=function(){this._resolver.dispose(),this._refetchVariables=null,this._hasFetched=!1,this._refetchSubscription&&(this._refetchSubscription.unsubscribe(),this._refetchSubscription=null,this._isARequestInFlight=!1),this._queryFetcher&&this._queryFetcher.dispose()},v.render=function(){var t=this.props,r=t.componentRef,n=(t.__relayContext,t.__rootIsQueryRenderer,(0,a.default)(t,h));return S.createElement(m.Provider,{value:this.state.contextForChildren},S.createElement(e,(0,o.default)({},n,this.state.data,{ref:r,relay:this.state.relayProp})))},p}(S.Component),(0,u.default)(n,"displayName",f),n}(e,t,r)}))}}}}]);
//# sourceMappingURL=ReactRelayPaginationContainer.js.js.map?f52f4