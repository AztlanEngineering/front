{"version":3,"file":"FragmentResource.js.js?1b112","mappings":"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","sources":["webpack://@aztlan/template-react/../../node_modules/react-relay/lib/relay-hooks/legacy/FragmentResource.js"],"sourcesContent":["'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar LRUCache = require('../LRUCache');\nvar _require = require('../QueryResource'),\n  getQueryResourceForEnvironment = _require.getQueryResourceForEnvironment;\nvar SuspenseResource = require('../SuspenseResource');\nvar invariant = require('invariant');\nvar _require2 = require('relay-runtime'),\n  _require2$__internal = _require2.__internal,\n  fetchQuery = _require2$__internal.fetchQuery,\n  getPromiseForActiveRequest = _require2$__internal.getPromiseForActiveRequest,\n  RelayFeatureFlags = _require2.RelayFeatureFlags,\n  createOperationDescriptor = _require2.createOperationDescriptor,\n  getFragmentIdentifier = _require2.getFragmentIdentifier,\n  getPendingOperationsForFragment = _require2.getPendingOperationsForFragment,\n  getSelector = _require2.getSelector,\n  getVariablesFromFragment = _require2.getVariablesFromFragment,\n  handlePotentialSnapshotErrors = _require2.handlePotentialSnapshotErrors,\n  isPromise = _require2.isPromise,\n  recycleNodesInto = _require2.recycleNodesInto;\nvar WEAKMAP_SUPPORTED = typeof WeakMap === 'function';\nvar CACHE_CAPACITY = 1000000;\nvar CONSTANT_READONLY_EMPTY_ARRAY = Object.freeze([]);\nfunction isMissingData(snapshot) {\n  if (Array.isArray(snapshot)) {\n    return snapshot.some(function (s) {\n      return s.isMissingData;\n    });\n  }\n  return snapshot.isMissingData;\n}\nfunction hasMissingClientEdges(snapshot) {\n  var _snapshot$missingClie, _snapshot$missingClie2;\n  if (Array.isArray(snapshot)) {\n    return snapshot.some(function (s) {\n      var _s$missingClientEdges, _s$missingClientEdges2;\n      return ((_s$missingClientEdges = (_s$missingClientEdges2 = s.missingClientEdges) === null || _s$missingClientEdges2 === void 0 ? void 0 : _s$missingClientEdges2.length) !== null && _s$missingClientEdges !== void 0 ? _s$missingClientEdges : 0) > 0;\n    });\n  }\n  return ((_snapshot$missingClie = (_snapshot$missingClie2 = snapshot.missingClientEdges) === null || _snapshot$missingClie2 === void 0 ? void 0 : _snapshot$missingClie2.length) !== null && _snapshot$missingClie !== void 0 ? _snapshot$missingClie : 0) > 0;\n}\nfunction missingLiveResolverFields(snapshot) {\n  if (Array.isArray(snapshot)) {\n    return snapshot.map(function (s) {\n      return s.missingLiveResolverFields;\n    }).filter(Boolean).flat();\n  }\n  return snapshot.missingLiveResolverFields;\n}\nfunction singularOrPluralForEach(snapshot, f) {\n  if (Array.isArray(snapshot)) {\n    snapshot.forEach(f);\n  } else {\n    f(snapshot);\n  }\n}\nfunction getFragmentResult(cacheKey, snapshot, storeEpoch) {\n  if (Array.isArray(snapshot)) {\n    return {\n      cacheKey: cacheKey,\n      snapshot: snapshot,\n      data: snapshot.map(function (s) {\n        return s.data;\n      }),\n      isMissingData: isMissingData(snapshot),\n      storeEpoch: storeEpoch\n    };\n  }\n  return {\n    cacheKey: cacheKey,\n    snapshot: snapshot,\n    data: snapshot.data,\n    isMissingData: isMissingData(snapshot),\n    storeEpoch: storeEpoch\n  };\n}\nvar ClientEdgeQueryResultsCache = /*#__PURE__*/function () {\n  function ClientEdgeQueryResultsCache(environment) {\n    (0, _defineProperty2[\"default\"])(this, \"_cache\", new Map());\n    (0, _defineProperty2[\"default\"])(this, \"_retainCounts\", new Map());\n    this._environment = environment;\n  }\n  var _proto = ClientEdgeQueryResultsCache.prototype;\n  _proto.get = function get(fragmentIdentifier) {\n    var _this$_cache$get$, _this$_cache$get;\n    return (_this$_cache$get$ = (_this$_cache$get = this._cache.get(fragmentIdentifier)) === null || _this$_cache$get === void 0 ? void 0 : _this$_cache$get[0]) !== null && _this$_cache$get$ !== void 0 ? _this$_cache$get$ : undefined;\n  };\n  _proto.recordQueryResults = function recordQueryResults(fragmentIdentifier, value) {\n    var _this = this;\n    var existing = this._cache.get(fragmentIdentifier);\n    if (!existing) {\n      var suspenseResource = new SuspenseResource(function () {\n        return _this._retain(fragmentIdentifier);\n      });\n      this._cache.set(fragmentIdentifier, [value, suspenseResource]);\n      suspenseResource.temporaryRetain(this._environment);\n    } else {\n      var existingResults = existing[0],\n        _suspenseResource = existing[1];\n      value.forEach(function (queryResult) {\n        existingResults.push(queryResult);\n      });\n      _suspenseResource.temporaryRetain(this._environment);\n    }\n  };\n  _proto._retain = function _retain(id) {\n    var _this2 = this;\n    var _this$_retainCounts$g;\n    var retainCount = ((_this$_retainCounts$g = this._retainCounts.get(id)) !== null && _this$_retainCounts$g !== void 0 ? _this$_retainCounts$g : 0) + 1;\n    this._retainCounts.set(id, retainCount);\n    return {\n      dispose: function dispose() {\n        var _this$_retainCounts$g2;\n        var newRetainCount = ((_this$_retainCounts$g2 = _this2._retainCounts.get(id)) !== null && _this$_retainCounts$g2 !== void 0 ? _this$_retainCounts$g2 : 0) - 1;\n        if (newRetainCount > 0) {\n          _this2._retainCounts.set(id, newRetainCount);\n        } else {\n          _this2._retainCounts[\"delete\"](id);\n          _this2._cache[\"delete\"](id);\n        }\n      }\n    };\n  };\n  return ClientEdgeQueryResultsCache;\n}();\nvar FragmentResourceImpl = /*#__PURE__*/function () {\n  function FragmentResourceImpl(environment) {\n    this._environment = environment;\n    this._cache = LRUCache.create(CACHE_CAPACITY);\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES) {\n      this._clientEdgeQueryResultsCache = new ClientEdgeQueryResultsCache(environment);\n    }\n  }\n  var _proto2 = FragmentResourceImpl.prototype;\n  _proto2.read = function read(fragmentNode, fragmentRef, componentDisplayName, fragmentKey) {\n    return this.readWithIdentifier(fragmentNode, fragmentRef, getFragmentIdentifier(fragmentNode, fragmentRef), componentDisplayName, fragmentKey);\n  };\n  _proto2.readWithIdentifier = function readWithIdentifier(fragmentNode, fragmentRef, fragmentIdentifier, componentDisplayName, fragmentKey) {\n    var _this3 = this;\n    var _fragmentNode$metadat, _fragmentNode$metadat2, _missingLiveResolverF2, _missingLiveResolverF3;\n    var environment = this._environment;\n    if (fragmentRef == null) {\n      return {\n        cacheKey: fragmentIdentifier,\n        data: null,\n        isMissingData: false,\n        snapshot: null,\n        storeEpoch: 0\n      };\n    }\n    var storeEpoch = environment.getStore().getEpoch();\n    if ((fragmentNode === null || fragmentNode === void 0 ? void 0 : (_fragmentNode$metadat = fragmentNode.metadata) === null || _fragmentNode$metadat === void 0 ? void 0 : _fragmentNode$metadat.plural) === true) {\n      !Array.isArray(fragmentRef) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected fragment pointer%s for fragment `%s` to be ' + 'an array, instead got `%s`. Remove `@relay(plural: true)` ' + 'from fragment `%s` to allow the prop to be an object.', fragmentKey != null ? \" for key `\".concat(fragmentKey, \"`\") : '', fragmentNode.name, typeof fragmentRef, fragmentNode.name) : invariant(false) : void 0;\n      if (fragmentRef.length === 0) {\n        return {\n          cacheKey: fragmentIdentifier,\n          data: CONSTANT_READONLY_EMPTY_ARRAY,\n          isMissingData: false,\n          snapshot: CONSTANT_READONLY_EMPTY_ARRAY,\n          storeEpoch: storeEpoch\n        };\n      }\n    }\n    var cachedValue = this._cache.get(fragmentIdentifier);\n    if (cachedValue != null) {\n      var _missingLiveResolverF;\n      if (cachedValue.kind === 'pending' && isPromise(cachedValue.promise)) {\n        environment.__log({\n          name: 'suspense.fragment',\n          data: cachedValue.result.data,\n          fragment: fragmentNode,\n          isRelayHooks: true,\n          isMissingData: cachedValue.result.isMissingData,\n          isPromiseCached: true,\n          pendingOperations: cachedValue.pendingOperations\n        });\n        throw cachedValue.promise;\n      }\n      if (cachedValue.kind === 'done' && cachedValue.result.snapshot && !((_missingLiveResolverF = missingLiveResolverFields(cachedValue.result.snapshot)) !== null && _missingLiveResolverF !== void 0 && _missingLiveResolverF.length)) {\n        this._throwOrLogErrorsInSnapshot(cachedValue.result.snapshot);\n        if (cachedValue.result.isMissingData) {\n          environment.__log({\n            name: 'fragmentresource.missing_data',\n            data: cachedValue.result.data,\n            fragment: fragmentNode,\n            isRelayHooks: true,\n            cached: true\n          });\n        }\n        return cachedValue.result;\n      }\n    }\n    var fragmentSelector = getSelector(fragmentNode, fragmentRef);\n    !(fragmentSelector != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to receive an object where `...%s` was spread, ' + 'but the fragment reference was not found`. This is most ' + 'likely the result of:\\n' + \"- Forgetting to spread `%s` in `%s`'s parent's fragment.\\n\" + '- Conditionally fetching `%s` but unconditionally passing %s prop ' + 'to `%s`. If the parent fragment only fetches the fragment conditionally ' + '- with e.g. `@include`, `@skip`, or inside a `... on SomeType { }` ' + 'spread  - then the fragment reference will not exist. ' + 'In this case, pass `null` if the conditions for evaluating the ' + 'fragment are not met (e.g. if the `@include(if)` value is false.)', fragmentNode.name, fragmentNode.name, componentDisplayName, fragmentNode.name, fragmentKey == null ? 'a fragment reference' : \"the `\".concat(fragmentKey, \"`\"), componentDisplayName) : invariant(false) : void 0;\n    var fragmentResult = null;\n    var snapshot = null;\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && cachedValue != null && cachedValue.kind === 'missing') {\n      fragmentResult = cachedValue.result;\n      snapshot = cachedValue.snapshot;\n    } else {\n      snapshot = fragmentSelector.kind === 'PluralReaderSelector' ? fragmentSelector.selectors.map(function (s) {\n        return environment.lookup(s);\n      }) : environment.lookup(fragmentSelector);\n      fragmentResult = getFragmentResult(fragmentIdentifier, snapshot, storeEpoch);\n    }\n    if (!fragmentResult.isMissingData) {\n      this._throwOrLogErrorsInSnapshot(snapshot);\n      this._cache.set(fragmentIdentifier, {\n        kind: 'done',\n        result: fragmentResult\n      });\n      return fragmentResult;\n    }\n    var clientEdgeRequests = null;\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES && ((_fragmentNode$metadat2 = fragmentNode.metadata) === null || _fragmentNode$metadat2 === void 0 ? void 0 : _fragmentNode$metadat2.hasClientEdges) === true && hasMissingClientEdges(snapshot)) {\n      clientEdgeRequests = [];\n      var queryResource = getQueryResourceForEnvironment(this._environment);\n      var queryResults = [];\n      singularOrPluralForEach(snapshot, function (snap) {\n        var _snap$missingClientEd;\n        (_snap$missingClientEd = snap.missingClientEdges) === null || _snap$missingClientEd === void 0 ? void 0 : _snap$missingClientEd.forEach(function (_ref) {\n          var _clientEdgeRequests;\n          var request = _ref.request,\n            clientEdgeDestinationID = _ref.clientEdgeDestinationID;\n          var _this3$_performClient = _this3._performClientEdgeQuery(queryResource, fragmentNode, fragmentRef, request, clientEdgeDestinationID),\n            queryResult = _this3$_performClient.queryResult,\n            requestDescriptor = _this3$_performClient.requestDescriptor;\n          queryResults.push(queryResult);\n          (_clientEdgeRequests = clientEdgeRequests) === null || _clientEdgeRequests === void 0 ? void 0 : _clientEdgeRequests.push(requestDescriptor);\n        });\n      });\n      !(this._clientEdgeQueryResultsCache != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Client edge query result cache should exist when ENABLE_CLIENT_EDGES is on.') : invariant(false) : void 0;\n      this._clientEdgeQueryResultsCache.recordQueryResults(fragmentIdentifier, queryResults);\n    }\n    var clientEdgePromises = [];\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES && clientEdgeRequests) {\n      clientEdgePromises = clientEdgeRequests.map(function (request) {\n        return getPromiseForActiveRequest(_this3._environment, request);\n      }).filter(Boolean);\n    }\n    var fragmentOwner = fragmentSelector.kind === 'PluralReaderSelector' ? fragmentSelector.selectors[0].owner : fragmentSelector.owner;\n    var parentQueryPromiseResult = this._getAndSavePromiseForFragmentRequestInFlight(fragmentIdentifier, fragmentNode, fragmentOwner, fragmentResult);\n    var parentQueryPromiseResultPromise = parentQueryPromiseResult === null || parentQueryPromiseResult === void 0 ? void 0 : parentQueryPromiseResult.promise;\n    var missingResolverFieldPromises = (_missingLiveResolverF2 = (_missingLiveResolverF3 = missingLiveResolverFields(snapshot)) === null || _missingLiveResolverF3 === void 0 ? void 0 : _missingLiveResolverF3.map(function (_ref2) {\n      var liveStateID = _ref2.liveStateID;\n      var store = environment.getStore();\n      return store.getLiveResolverPromise(liveStateID);\n    })) !== null && _missingLiveResolverF2 !== void 0 ? _missingLiveResolverF2 : [];\n    if (clientEdgePromises.length || missingResolverFieldPromises.length || isPromise(parentQueryPromiseResultPromise)) {\n      var _parentQueryPromiseRe, _clientEdgeRequests2;\n      environment.__log({\n        name: 'suspense.fragment',\n        data: fragmentResult.data,\n        fragment: fragmentNode,\n        isRelayHooks: true,\n        isPromiseCached: false,\n        isMissingData: fragmentResult.isMissingData,\n        pendingOperations: [].concat((0, _toConsumableArray2[\"default\"])((_parentQueryPromiseRe = parentQueryPromiseResult === null || parentQueryPromiseResult === void 0 ? void 0 : parentQueryPromiseResult.pendingOperations) !== null && _parentQueryPromiseRe !== void 0 ? _parentQueryPromiseRe : []), (0, _toConsumableArray2[\"default\"])((_clientEdgeRequests2 = clientEdgeRequests) !== null && _clientEdgeRequests2 !== void 0 ? _clientEdgeRequests2 : []))\n      });\n      var promises = [];\n      if (clientEdgePromises.length > 0) {\n        promises = promises.concat(clientEdgePromises);\n      }\n      if (missingResolverFieldPromises.length > 0) {\n        promises = promises.concat(missingResolverFieldPromises);\n      }\n      if (promises.length > 0) {\n        if (parentQueryPromiseResultPromise) {\n          promises.push(parentQueryPromiseResultPromise);\n        }\n        throw Promise.all(promises);\n      }\n      if (parentQueryPromiseResultPromise) {\n        throw parentQueryPromiseResultPromise;\n      }\n    }\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && fragmentResult.isMissingData) {\n      this._cache.set(fragmentIdentifier, {\n        kind: 'done',\n        result: fragmentResult\n      });\n    }\n    this._throwOrLogErrorsInSnapshot(snapshot);\n    environment.__log({\n      name: 'fragmentresource.missing_data',\n      data: fragmentResult.data,\n      fragment: fragmentNode,\n      isRelayHooks: true,\n      cached: false\n    });\n    return getFragmentResult(fragmentIdentifier, snapshot, storeEpoch);\n  };\n  _proto2._performClientEdgeQuery = function _performClientEdgeQuery(queryResource, fragmentNode, fragmentRef, request, clientEdgeDestinationID) {\n    var originalVariables = getVariablesFromFragment(fragmentNode, fragmentRef);\n    var variables = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, originalVariables), {}, {\n      id: clientEdgeDestinationID\n    });\n    var operation = createOperationDescriptor(request, variables, {});\n    var fetchObservable = fetchQuery(this._environment, operation);\n    var queryResult = queryResource.prepare(operation, fetchObservable);\n    return {\n      requestDescriptor: operation.request,\n      queryResult: queryResult\n    };\n  };\n  _proto2._throwOrLogErrorsInSnapshot = function _throwOrLogErrorsInSnapshot(snapshot) {\n    var _this4 = this;\n    if (Array.isArray(snapshot)) {\n      snapshot.forEach(function (s) {\n        handlePotentialSnapshotErrors(_this4._environment, s.missingRequiredFields, s.relayResolverErrors, s.errorResponseFields);\n      });\n    } else {\n      handlePotentialSnapshotErrors(this._environment, snapshot.missingRequiredFields, snapshot.relayResolverErrors, snapshot.errorResponseFields);\n    }\n  };\n  _proto2.readSpec = function readSpec(fragmentNodes, fragmentRefs, componentDisplayName) {\n    var result = {};\n    for (var key in fragmentNodes) {\n      result[key] = this.read(fragmentNodes[key], fragmentRefs[key], componentDisplayName, key);\n    }\n    return result;\n  };\n  _proto2.subscribe = function subscribe(fragmentResult, callback) {\n    var _this5 = this;\n    var environment = this._environment;\n    var cacheKey = fragmentResult.cacheKey;\n    var renderedSnapshot = fragmentResult.snapshot;\n    if (!renderedSnapshot) {\n      return {\n        dispose: function dispose() {}\n      };\n    }\n    var _this$checkMissedUpda = this.checkMissedUpdates(fragmentResult),\n      didMissUpdates = _this$checkMissedUpda[0],\n      currentSnapshot = _this$checkMissedUpda[1];\n    if (didMissUpdates) {\n      callback();\n    }\n    var disposables = [];\n    if (Array.isArray(renderedSnapshot)) {\n      !Array.isArray(currentSnapshot) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected snapshots to be plural. ' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n      currentSnapshot.forEach(function (snapshot, idx) {\n        disposables.push(environment.subscribe(snapshot, function (latestSnapshot) {\n          var storeEpoch = environment.getStore().getEpoch();\n          _this5._updatePluralSnapshot(cacheKey, currentSnapshot, latestSnapshot, idx, storeEpoch);\n          callback();\n        }));\n      });\n    } else {\n      !(currentSnapshot != null && !Array.isArray(currentSnapshot)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected snapshot to be singular. ' + \"If you're seeing this, this is likely a bug in Relay.\") : invariant(false) : void 0;\n      disposables.push(environment.subscribe(currentSnapshot, function (latestSnapshot) {\n        var storeEpoch = environment.getStore().getEpoch();\n        var result = getFragmentResult(cacheKey, latestSnapshot, storeEpoch);\n        if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n          _this5._cache.set(cacheKey, {\n            kind: 'missing',\n            result: result,\n            snapshot: latestSnapshot\n          });\n        } else {\n          _this5._cache.set(cacheKey, {\n            kind: 'done',\n            result: getFragmentResult(cacheKey, latestSnapshot, storeEpoch)\n          });\n        }\n        callback();\n      }));\n    }\n    if (RelayFeatureFlags.ENABLE_CLIENT_EDGES) {\n      var _this$_clientEdgeQuer, _this$_clientEdgeQuer2;\n      var clientEdgeQueryResults = (_this$_clientEdgeQuer = (_this$_clientEdgeQuer2 = this._clientEdgeQueryResultsCache) === null || _this$_clientEdgeQuer2 === void 0 ? void 0 : _this$_clientEdgeQuer2.get(cacheKey)) !== null && _this$_clientEdgeQuer !== void 0 ? _this$_clientEdgeQuer : undefined;\n      if (clientEdgeQueryResults !== null && clientEdgeQueryResults !== void 0 && clientEdgeQueryResults.length) {\n        var queryResource = getQueryResourceForEnvironment(this._environment);\n        clientEdgeQueryResults.forEach(function (queryResult) {\n          disposables.push(queryResource.retain(queryResult));\n        });\n      }\n    }\n    return {\n      dispose: function dispose() {\n        disposables.forEach(function (s) {\n          return s.dispose();\n        });\n        _this5._cache[\"delete\"](cacheKey);\n      }\n    };\n  };\n  _proto2.subscribeSpec = function subscribeSpec(fragmentResults, callback) {\n    var _this6 = this;\n    var disposables = Object.keys(fragmentResults).map(function (key) {\n      return _this6.subscribe(fragmentResults[key], callback);\n    });\n    return {\n      dispose: function dispose() {\n        disposables.forEach(function (disposable) {\n          disposable.dispose();\n        });\n      }\n    };\n  };\n  _proto2.checkMissedUpdates = function checkMissedUpdates(fragmentResult) {\n    var environment = this._environment;\n    var renderedSnapshot = fragmentResult.snapshot;\n    if (!renderedSnapshot) {\n      return [false, null];\n    }\n    var storeEpoch = null;\n    storeEpoch = environment.getStore().getEpoch();\n    if (fragmentResult.storeEpoch === storeEpoch) {\n      return [false, fragmentResult.snapshot];\n    }\n    var cacheKey = fragmentResult.cacheKey;\n    if (Array.isArray(renderedSnapshot)) {\n      var didMissUpdates = false;\n      var currentSnapshots = [];\n      renderedSnapshot.forEach(function (snapshot, idx) {\n        var currentSnapshot = environment.lookup(snapshot.selector);\n        var renderData = snapshot.data;\n        var currentData = currentSnapshot.data;\n        var updatedData = recycleNodesInto(renderData, currentData);\n        if (updatedData !== renderData) {\n          currentSnapshot = (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, currentSnapshot), {}, {\n            data: updatedData\n          });\n          didMissUpdates = true;\n        }\n        currentSnapshots[idx] = currentSnapshot;\n      });\n      if (didMissUpdates) {\n        var result = getFragmentResult(cacheKey, currentSnapshots, storeEpoch);\n        if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n          this._cache.set(cacheKey, {\n            kind: 'missing',\n            result: result,\n            snapshot: currentSnapshots\n          });\n        } else {\n          this._cache.set(cacheKey, {\n            kind: 'done',\n            result: result\n          });\n        }\n      }\n      return [didMissUpdates, currentSnapshots];\n    }\n    var currentSnapshot = environment.lookup(renderedSnapshot.selector);\n    var renderData = renderedSnapshot.data;\n    var currentData = currentSnapshot.data;\n    var updatedData = recycleNodesInto(renderData, currentData);\n    var updatedCurrentSnapshot = {\n      data: updatedData,\n      isMissingData: currentSnapshot.isMissingData,\n      missingClientEdges: currentSnapshot.missingClientEdges,\n      missingLiveResolverFields: currentSnapshot.missingLiveResolverFields,\n      seenRecords: currentSnapshot.seenRecords,\n      selector: currentSnapshot.selector,\n      missingRequiredFields: currentSnapshot.missingRequiredFields,\n      relayResolverErrors: currentSnapshot.relayResolverErrors,\n      errorResponseFields: currentSnapshot.errorResponseFields\n    };\n    if (updatedData !== renderData) {\n      var _result = getFragmentResult(cacheKey, updatedCurrentSnapshot, storeEpoch);\n      if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && _result.isMissingData) {\n        this._cache.set(cacheKey, {\n          kind: 'missing',\n          result: _result,\n          snapshot: updatedCurrentSnapshot\n        });\n      } else {\n        this._cache.set(cacheKey, {\n          kind: 'done',\n          result: _result\n        });\n      }\n    }\n    return [updatedData !== renderData, updatedCurrentSnapshot];\n  };\n  _proto2.checkMissedUpdatesSpec = function checkMissedUpdatesSpec(fragmentResults) {\n    var _this7 = this;\n    return Object.keys(fragmentResults).some(function (key) {\n      return _this7.checkMissedUpdates(fragmentResults[key])[0];\n    });\n  };\n  _proto2._getAndSavePromiseForFragmentRequestInFlight = function _getAndSavePromiseForFragmentRequestInFlight(cacheKey, fragmentNode, fragmentOwner, fragmentResult) {\n    var _this8 = this;\n    var pendingOperationsResult = getPendingOperationsForFragment(this._environment, fragmentNode, fragmentOwner);\n    if (pendingOperationsResult == null) {\n      return null;\n    }\n    var networkPromise = pendingOperationsResult.promise;\n    var pendingOperations = pendingOperationsResult.pendingOperations;\n    var promise = networkPromise.then(function () {\n      _this8._cache[\"delete\"](cacheKey);\n    })[\"catch\"](function (error) {\n      _this8._cache[\"delete\"](cacheKey);\n    });\n    promise.displayName = networkPromise.displayName;\n    this._cache.set(cacheKey, {\n      kind: 'pending',\n      pendingOperations: pendingOperations,\n      promise: promise,\n      result: fragmentResult\n    });\n    return {\n      promise: promise,\n      pendingOperations: pendingOperations\n    };\n  };\n  _proto2._updatePluralSnapshot = function _updatePluralSnapshot(cacheKey, baseSnapshots, latestSnapshot, idx, storeEpoch) {\n    var _currentFragmentResul;\n    var currentFragmentResult = this._cache.get(cacheKey);\n    if (isPromise(currentFragmentResult)) {\n      reportInvalidCachedData(latestSnapshot.selector.node.name);\n      return;\n    }\n    var currentSnapshot = currentFragmentResult === null || currentFragmentResult === void 0 ? void 0 : (_currentFragmentResul = currentFragmentResult.result) === null || _currentFragmentResul === void 0 ? void 0 : _currentFragmentResul.snapshot;\n    if (currentSnapshot && !Array.isArray(currentSnapshot)) {\n      reportInvalidCachedData(latestSnapshot.selector.node.name);\n      return;\n    }\n    var nextSnapshots = currentSnapshot ? (0, _toConsumableArray2[\"default\"])(currentSnapshot) : (0, _toConsumableArray2[\"default\"])(baseSnapshots);\n    nextSnapshots[idx] = latestSnapshot;\n    var result = getFragmentResult(cacheKey, nextSnapshots, storeEpoch);\n    if (RelayFeatureFlags.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE && result.isMissingData) {\n      this._cache.set(cacheKey, {\n        kind: 'missing',\n        result: result,\n        snapshot: nextSnapshots\n      });\n    } else {\n      this._cache.set(cacheKey, {\n        kind: 'done',\n        result: result\n      });\n    }\n  };\n  return FragmentResourceImpl;\n}();\nfunction reportInvalidCachedData(nodeName) {\n  !false ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Relay: Expected to find cached data for plural fragment `%s` when ' + 'receiving a subscription. ' + \"If you're seeing this, this is likely a bug in Relay.\", nodeName) : invariant(false) : void 0;\n}\nfunction createFragmentResource(environment) {\n  return new FragmentResourceImpl(environment);\n}\nvar dataResources = WEAKMAP_SUPPORTED ? new WeakMap() : new Map();\nfunction getFragmentResourceForEnvironment(environment) {\n  var cached = dataResources.get(environment);\n  if (cached) {\n    return cached;\n  }\n  var newDataResource = createFragmentResource(environment);\n  dataResources.set(environment, newDataResource);\n  return newDataResource;\n}\nmodule.exports = {\n  createFragmentResource: createFragmentResource,\n  getFragmentResourceForEnvironment: getFragmentResourceForEnvironment\n};"],"names":["_interopRequireDefault","require","_objectSpread2","_defineProperty2","_toConsumableArray2","LRUCache","getQueryResourceForEnvironment","SuspenseResource","invariant","_require2","_require2$__internal","__internal","fetchQuery","getPromiseForActiveRequest","RelayFeatureFlags","createOperationDescriptor","getFragmentIdentifier","getPendingOperationsForFragment","getSelector","getVariablesFromFragment","handlePotentialSnapshotErrors","isPromise","recycleNodesInto","WEAKMAP_SUPPORTED","WeakMap","CONSTANT_READONLY_EMPTY_ARRAY","Object","freeze","isMissingData","snapshot","Array","isArray","some","s","missingLiveResolverFields","map","filter","Boolean","flat","getFragmentResult","cacheKey","storeEpoch","data","ClientEdgeQueryResultsCache","environment","this","Map","_environment","_proto","prototype","get","fragmentIdentifier","_this$_cache$get$","_this$_cache$get","_cache","undefined","recordQueryResults","value","_this","existing","existingResults","_suspenseResource","forEach","queryResult","push","temporaryRetain","suspenseResource","_retain","set","id","_this$_retainCounts$g","_this2","retainCount","_retainCounts","dispose","_this$_retainCounts$g2","newRetainCount","FragmentResourceImpl","create","ENABLE_CLIENT_EDGES","_clientEdgeQueryResultsCache","_proto2","read","fragmentNode","fragmentRef","componentDisplayName","fragmentKey","readWithIdentifier","_fragmentNode$metadat","_fragmentNode$metadat2","_missingLiveResolverF2","_missingLiveResolverF3","_this3","getStore","getEpoch","metadata","plural","length","cachedValue","_missingLiveResolverF","kind","promise","__log","name","result","fragment","isRelayHooks","isPromiseCached","pendingOperations","_throwOrLogErrorsInSnapshot","cached","fragmentSelector","fragmentResult","ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE","selectors","lookup","clientEdgeRequests","hasClientEdges","_snapshot$missingClie","_snapshot$missingClie2","_s$missingClientEdges","_s$missingClientEdges2","missingClientEdges","hasMissingClientEdges","queryResource","queryResults","f","singularOrPluralForEach","snap","_snap$missingClientEd","_ref","_clientEdgeRequests","request","clientEdgeDestinationID","_this3$_performClient","_performClientEdgeQuery","requestDescriptor","clientEdgePromises","fragmentOwner","owner","parentQueryPromiseResult","_getAndSavePromiseForFragmentRequestInFlight","parentQueryPromiseResultPromise","missingResolverFieldPromises","_ref2","liveStateID","getLiveResolverPromise","_parentQueryPromiseRe","_clientEdgeRequests2","concat","promises","Promise","all","originalVariables","variables","operation","fetchObservable","prepare","_this4","missingRequiredFields","relayResolverErrors","errorResponseFields","readSpec","fragmentNodes","fragmentRefs","key","subscribe","callback","_this5","renderedSnapshot","_this$checkMissedUpda","checkMissedUpdates","didMissUpdates","currentSnapshot","disposables","idx","latestSnapshot","_updatePluralSnapshot","_this$_clientEdgeQuer","_this$_clientEdgeQuer2","clientEdgeQueryResults","retain","subscribeSpec","fragmentResults","_this6","keys","disposable","currentSnapshots","selector","renderData","currentData","updatedData","updatedCurrentSnapshot","seenRecords","_result","checkMissedUpdatesSpec","_this7","_this8","pendingOperationsResult","networkPromise","then","error","displayName","baseSnapshots","_currentFragmentResul","currentFragmentResult","reportInvalidCachedData","node","nextSnapshots","nodeName","createFragmentResource","dataResources","module","exports","getFragmentResourceForEnvironment","newDataResource"],"sourceRoot":""}