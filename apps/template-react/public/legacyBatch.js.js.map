{"version":3,"file":"legacyBatch.js.js?98f58","mappings":"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","sources":["webpack://@aztlan/template-react/../../node_modules/react-relay-network-modern/lib/middlewares/legacyBatch.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = legacyBatchMiddleware;\nvar _utils = require(\"../utils\");\nvar _RelayRequestBatch = _interopRequireDefault(require(\"../RelayRequestBatch\"));\nvar _RelayRequest = _interopRequireDefault(require(\"../RelayRequest\"));\nvar _batch = require(\"./batch\");\nvar _excluded = [\"headersOrThunk\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n// Max out at roughly 100kb (express-graphql imposed max)\nvar DEFAULT_BATCH_SIZE = 102400;\nfunction legacyBatchMiddleware(options) {\n  var opts = options || {};\n  var batchTimeout = opts.batchTimeout || 0; // 0 is the same as nextTick in nodeJS\n  var allowMutations = opts.allowMutations || false;\n  var batchUrl = opts.batchUrl || '/graphql/batch';\n  var maxBatchSize = opts.maxBatchSize || DEFAULT_BATCH_SIZE;\n  var singleton = {};\n  var fetchOpts = {};\n  if (opts.method) fetchOpts.method = opts.method;\n  if (opts.credentials) fetchOpts.credentials = opts.credentials;\n  if (opts.mode) fetchOpts.mode = opts.mode;\n  if (opts.cache) fetchOpts.cache = opts.cache;\n  if (opts.redirect) fetchOpts.redirect = opts.redirect;\n  if (opts.headers) fetchOpts.headersOrThunk = opts.headers;\n  return function (next) {\n    return function (req) {\n      // do not batch mutations unless allowMutations = true\n      if (req.isMutation() && !allowMutations) {\n        return next(req);\n      }\n      if (!(req instanceof _RelayRequest[\"default\"])) {\n        throw new _batch.RRNLBatchMiddlewareError('Relay batch middleware accepts only simple RelayRequest. Did you add batchMiddleware twice?');\n      }\n\n      // req with FormData can not be batched\n      if (req.isFormData()) {\n        return next(req);\n      }\n      return passThroughBatch(req, next, {\n        batchTimeout: batchTimeout,\n        batchUrl: batchUrl,\n        singleton: singleton,\n        maxBatchSize: maxBatchSize,\n        fetchOpts: fetchOpts\n      });\n    };\n  };\n}\nfunction passThroughBatch(req, next, opts) {\n  var singleton = opts.singleton;\n  var bodyLength = req.fetchOpts.body.length;\n  if (!bodyLength) {\n    return next(req);\n  }\n  if (!singleton.batcher || !singleton.batcher.acceptRequests) {\n    singleton.batcher = prepareNewBatcher(next, opts);\n  }\n  if (singleton.batcher.bodySize + bodyLength + 1 > opts.maxBatchSize) {\n    singleton.batcher = prepareNewBatcher(next, opts);\n  }\n\n  // +1 accounts for tailing comma after joining\n  singleton.batcher.bodySize += bodyLength + 1;\n\n  // queue request\n  return new Promise(function (resolve, reject) {\n    var relayReqId = req.getID();\n    var requestMap = singleton.batcher.requestMap;\n    var requestWrapper = {\n      req: req,\n      completeOk: function completeOk(res) {\n        requestWrapper.done = true;\n        resolve(res);\n        requestWrapper.duplicates.forEach(function (r) {\n          return r.completeOk(res);\n        });\n      },\n      completeErr: function completeErr(err) {\n        requestWrapper.done = true;\n        reject(err);\n        requestWrapper.duplicates.forEach(function (r) {\n          return r.completeErr(err);\n        });\n      },\n      done: false,\n      duplicates: []\n    };\n    if (requestMap[relayReqId]) {\n      /*\n        I've run into a scenario with Relay Classic where if you have 2 components\n        that make the exact same query, Relay will dedup the queries and reuse\n        the request ids but still make 2 requests. The batch code then loses track\n        of all the duplicate requests being made and never resolves or rejects\n        the duplicate requests\n        https://github.com/nodkz/react-relay-network-layer/pull/52\n      */\n      requestMap[relayReqId].duplicates.push(requestWrapper);\n    } else {\n      requestMap[relayReqId] = requestWrapper;\n    }\n  });\n}\nfunction prepareNewBatcher(next, opts) {\n  var batcher = {\n    bodySize: 2,\n    // account for '[]'\n    requestMap: {},\n    acceptRequests: true\n  };\n  setTimeout(function () {\n    batcher.acceptRequests = false;\n    sendRequests(batcher.requestMap, next, opts).then(function () {\n      return finalizeUncompleted(batcher.requestMap);\n    })[\"catch\"](function () {\n      return finalizeUncompleted(batcher.requestMap);\n    });\n  }, opts.batchTimeout);\n  return batcher;\n}\nfunction sendRequests(_x, _x2, _x3) {\n  return _sendRequests.apply(this, arguments);\n} // check that server returns responses for all requests\nfunction _sendRequests() {\n  _sendRequests = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(requestMap, next, opts) {\n    var ids, request, _res, batchRequest, url, _opts$fetchOpts, headersOrThunk, fetchOpts, headers, batchResponse;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          ids = Object.keys(requestMap);\n          if (!(ids.length === 1)) {\n            _context.next = 11;\n            break;\n          }\n          // SEND AS SINGLE QUERY\n          request = requestMap[ids[0]];\n          _context.next = 5;\n          return next(request.req);\n        case 5:\n          _res = _context.sent;\n          request.completeOk(_res);\n          request.duplicates.forEach(function (r) {\n            return r.completeOk(_res);\n          });\n          return _context.abrupt(\"return\", _res);\n        case 11:\n          if (!(ids.length > 1)) {\n            _context.next = 37;\n            break;\n          }\n          // SEND AS BATCHED QUERY\n          batchRequest = new _RelayRequestBatch[\"default\"](ids.map(function (id) {\n            return requestMap[id].req;\n          })); // $FlowFixMe\n          _context.next = 15;\n          return (0, _utils.isFunction)(opts.batchUrl) ? opts.batchUrl(requestMap) : opts.batchUrl;\n        case 15:\n          url = _context.sent;\n          batchRequest.setFetchOption('url', url);\n          _opts$fetchOpts = opts.fetchOpts, headersOrThunk = _opts$fetchOpts.headersOrThunk, fetchOpts = _objectWithoutProperties(_opts$fetchOpts, _excluded);\n          batchRequest.setFetchOptions(fetchOpts);\n          if (!headersOrThunk) {\n            _context.next = 24;\n            break;\n          }\n          _context.next = 22;\n          return (0, _utils.isFunction)(headersOrThunk) ? headersOrThunk(batchRequest) : headersOrThunk;\n        case 22:\n          headers = _context.sent;\n          batchRequest.setFetchOption('headers', headers);\n        case 24:\n          _context.prev = 24;\n          _context.next = 27;\n          return next(batchRequest);\n        case 27:\n          batchResponse = _context.sent;\n          if (!(!batchResponse || !Array.isArray(batchResponse.json))) {\n            _context.next = 30;\n            break;\n          }\n          throw new _batch.RRNLBatchMiddlewareError('Wrong response from server. Did your server support batch request?');\n        case 30:\n          batchResponse.json.forEach(function (payload) {\n            if (!payload) return;\n            var request = requestMap[payload.id];\n            if (request) {\n              var _res2 = createSingleResponse(batchResponse, payload);\n              request.completeOk(_res2);\n            }\n          });\n          return _context.abrupt(\"return\", batchResponse);\n        case 34:\n          _context.prev = 34;\n          _context.t0 = _context[\"catch\"](24);\n          ids.forEach(function (id) {\n            requestMap[id].completeErr(_context.t0);\n          });\n        case 37:\n          return _context.abrupt(\"return\", Promise.resolve());\n        case 38:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[24, 34]]);\n  }));\n  return _sendRequests.apply(this, arguments);\n}\nfunction finalizeUncompleted(requestMap) {\n  Object.keys(requestMap).forEach(function (id) {\n    var request = requestMap[id];\n    if (!request.done) {\n      request.completeErr(new _batch.RRNLBatchMiddlewareError(\"Server does not return response for request with id \".concat(id, \" \\n\") + \"Response should have following shape { \\\"id\\\": \\\"\".concat(id, \"\\\", \\\"data\\\": {} }\")));\n    }\n  });\n}\nfunction createSingleResponse(batchResponse, json) {\n  // Fallback for graphql-graphene and apollo-server batch responses\n  var data = json.payload || json;\n  var res = batchResponse.clone();\n  res.processJsonData(data);\n  return res;\n}"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","options","opts","batchTimeout","allowMutations","batchUrl","maxBatchSize","DEFAULT_BATCH_SIZE","singleton","fetchOpts","method","credentials","mode","cache","redirect","headers","headersOrThunk","next","req","isMutation","_RelayRequest","_batch","RRNLBatchMiddlewareError","isFormData","bodyLength","body","length","batcher","acceptRequests","prepareNewBatcher","bodySize","Promise","resolve","reject","relayReqId","getID","requestMap","requestWrapper","completeOk","res","done","duplicates","forEach","r","completeErr","err","push","passThroughBatch","_utils","require","_RelayRequestBatch","_interopRequireDefault","_excluded","__esModule","_regeneratorRuntime","Op","hasOwn","hasOwnProperty","key","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","undefined","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_objectWithoutProperties","source","excluded","target","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","asyncGeneratorStep","gen","_next","_throw","setTimeout","_x","_x2","_x3","_sendRequests","apply","arguments","sendRequests","finalizeUncompleted","_callee","ids","request","_res","batchRequest","url","_opts$fetchOpts","batchResponse","_context","map","id","isFunction","setFetchOption","setFetchOptions","Array","isArray","json","payload","_res2","createSingleResponse","t0","args","concat","data","clone","processJsonData"],"sourceRoot":""}