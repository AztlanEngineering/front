{"version":3,"file":"auth.js.js?965c2","mappings":"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","sources":["webpack://@aztlan/template-react/../../node_modules/react-relay-network-modern/lib/middlewares/auth.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RRNLAuthMiddlewareError = void 0;\nexports[\"default\"] = authMiddleware;\nvar _utils = require(\"../utils\");\nvar _RRNLError2 = _interopRequireDefault(require(\"../RRNLError\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar RRNLAuthMiddlewareError = /*#__PURE__*/function (_RRNLError) {\n  _inherits(RRNLAuthMiddlewareError, _RRNLError);\n  var _super = _createSuper(RRNLAuthMiddlewareError);\n  function RRNLAuthMiddlewareError(msg) {\n    var _this;\n    _classCallCheck(this, RRNLAuthMiddlewareError);\n    _this = _super.call(this, msg);\n    _this.name = 'RRNLAuthMiddlewareError';\n    return _this;\n  }\n  return _createClass(RRNLAuthMiddlewareError);\n}(_RRNLError2[\"default\"]);\nexports.RRNLAuthMiddlewareError = RRNLAuthMiddlewareError;\nfunction authMiddleware(opts) {\n  var _ref = opts || {},\n    tokenOrThunk = _ref.token,\n    tokenRefreshPromise = _ref.tokenRefreshPromise,\n    _ref$allowEmptyToken = _ref.allowEmptyToken,\n    allowEmptyToken = _ref$allowEmptyToken === void 0 ? false : _ref$allowEmptyToken,\n    _ref$prefix = _ref.prefix,\n    prefix = _ref$prefix === void 0 ? 'Bearer ' : _ref$prefix,\n    _ref$header = _ref.header,\n    header = _ref$header === void 0 ? 'Authorization' : _ref$header;\n  var tokenRefreshInProgress = null;\n  return function (next) {\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req) {\n        var token, _res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return (0, _utils.isFunction)(tokenOrThunk) ? tokenOrThunk(req) : tokenOrThunk;\n            case 3:\n              token = _context.sent;\n              if (!(!token && tokenRefreshPromise && !allowEmptyToken)) {\n                _context.next = 6;\n                break;\n              }\n              throw new RRNLAuthMiddlewareError('Empty token');\n            case 6:\n              if (token) {\n                req.fetchOpts.headers[header] = \"\".concat(prefix).concat(token);\n              }\n              _context.next = 9;\n              return next(req);\n            case 9:\n              _res = _context.sent;\n              return _context.abrupt(\"return\", _res);\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              if (!(_context.t0 && tokenRefreshPromise)) {\n                _context.next = 20;\n                break;\n              }\n              if (!(_context.t0.message === 'Empty token' || _context.t0.res && _context.t0.res.status === 401)) {\n                _context.next = 20;\n                break;\n              }\n              if (!tokenRefreshPromise) {\n                _context.next = 20;\n                break;\n              }\n              if (!tokenRefreshInProgress) {\n                tokenRefreshInProgress = Promise.resolve(tokenRefreshPromise(req, _context.t0.res)).then(function (newToken) {\n                  tokenRefreshInProgress = null;\n                  return newToken;\n                })[\"catch\"](function (err) {\n                  tokenRefreshInProgress = null;\n                  throw err;\n                });\n              }\n              return _context.abrupt(\"return\", tokenRefreshInProgress.then(function (newToken) {\n                if (!newToken && !allowEmptyToken) {\n                  throw new RRNLAuthMiddlewareError('Empty token');\n                }\n                var newReq = req.clone();\n                if (newToken) {\n                  newReq.fetchOpts.headers[header] = \"\".concat(prefix).concat(newToken);\n                } else {\n                  delete newReq.fetchOpts.headers[header];\n                }\n                return next(newReq); // re-run query with new token\n              }));\n            case 20:\n              throw _context.t0;\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 13]]);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  };\n}"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","RRNLAuthMiddlewareError","opts","_ref","tokenOrThunk","token","tokenRefreshPromise","_ref$allowEmptyToken","allowEmptyToken","_ref$prefix","prefix","_ref$header","header","tokenRefreshInProgress","next","fn","_ref2","_regeneratorRuntime","mark","_callee","req","_res","wrap","_context","prev","_utils","isFunction","sent","fetchOpts","headers","concat","abrupt","t0","message","res","status","Promise","resolve","then","newToken","err","newReq","clone","stop","self","this","args","arguments","reject","gen","apply","_next","asyncGeneratorStep","_throw","undefined","_x","require","Op","hasOwn","hasOwnProperty","key","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","record","result","__await","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","done","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","methodName","TypeError","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","name","setPrototypeOf","__proto__","awrap","async","iter","keys","val","object","reverse","pop","skipTempReset","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_setPrototypeOf","o","p","bind","_getPrototypeOf","_RRNLError","subClass","superClass","_inherits","Constructor","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct","Super","NewTarget","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","msg","_this","instance","_classCallCheck","__esModule"],"sourceRoot":""}