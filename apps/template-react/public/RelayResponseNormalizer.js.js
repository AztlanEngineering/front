"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[54],{9956:(e,t,r)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var i=r(6824).default,s=i(r(6579)),l=i(r(2839)),n=r(8762),o=(n.ACTOR_IDENTIFIER_FIELD_NAME,n.getActorIdentifierFromPayload),c=r(1573),_=c.ACTOR_CHANGE,h=c.CLIENT_COMPONENT,d=c.CLIENT_EDGE_TO_CLIENT_OBJECT,u=c.CLIENT_EXTENSION,f=c.CONDITION,p=c.DEFER,v=c.FRAGMENT_SPREAD,g=c.INLINE_FRAGMENT,y=c.LINKED_FIELD,b=c.LINKED_HANDLE,I=c.MODULE_IMPORT,m=c.RELAY_LIVE_RESOLVER,D=c.RELAY_RESOLVER,E=c.SCALAR_FIELD,T=c.SCALAR_HANDLE,S=c.STREAM,A=c.TYPE_DISCRIMINATOR,R=r(6133),L=R.generateClientID,C=(R.isClientID,r(6589).getLocalVariables),k=r(2888),N=k.buildErrorTrie,P=k.getErrorsByKey,O=k.getNestedErrorTrieByKey,V=r(2306),F=r(1854).createNormalizationSelector,z=r(8677),M=(z.ROOT_ID,z.TYPENAME_KEY),K=z.getArgumentValues,w=z.getHandleStorageKey,x=z.getModuleComponentKey,H=z.getModuleOperationKey,Y=z.getStorageKey,j=r(2980),B=j.TYPE_SCHEMA_TYPE,U=j.generateTypeID,G=(r(2588),r(9990));r(575);var W=function(){function e(e,t,r){this._actorIdentifier=r.actorIdentifier,this._getDataId=r.getDataID,this._handleFieldPayloads=[],this._treatMissingFieldsAsNull=r.treatMissingFieldsAsNull,this._incrementalPlaceholders=[],this._isClientExtension=!1,this._isUnmatchedAbstractType=!1,this._followupPayloads=[],this._path=r.path?(0,l.default)(r.path):[],this._recordSource=e,this._variables=t,this._shouldProcessClientComponents=r.shouldProcessClientComponents}var t=e.prototype;return t.normalizeResponse=function(e,t,r,a){var i=this._recordSource.get(t);return i||G(!1),this._assignClientAbstractTypes(e),this._errorTrie=N(a),this._traverseSelections(e,i,r),{errors:a,fieldPayloads:this._handleFieldPayloads,incrementalPlaceholders:this._incrementalPlaceholders,followupPayloads:this._followupPayloads,source:this._recordSource,isFinal:!1}},t._assignClientAbstractTypes=function(e){var t=e.clientAbstractTypes;if(null!=t)for(var r=0,a=Object.keys(t);r<a.length;r++){var i,l=a[r],n=(0,s.default)(t[l]);try{for(n.s();!(i=n.n()).done;){var o=i.value,c=U(o),_=this._recordSource.get(c);null==_&&(_=V.create(c,B),this._recordSource.set(c,_)),V.setValue(_,l,!0)}}catch(e){n.e(e)}finally{n.f()}}},t._getVariableValue=function(e){return this._variables.hasOwnProperty(e)||G(!1),this._variables[e]},t._getRecordType=function(e){var t=e[M];return null==t&&G(!1),t},t._traverseSelections=function(e,t,r){for(var a=0;a<e.selections.length;a++){var i=e.selections[a];switch(i.kind){case E:case y:this._normalizeField(i,t,r);break;case f:Boolean(this._getVariableValue(i.condition))===i.passingValue&&this._traverseSelections(i,t,r);break;case v:var s=this._variables;this._variables=C(this._variables,i.fragment.argumentDefinitions,i.args),this._traverseSelections(i.fragment,t,r),this._variables=s;break;case g:var l=i.abstractKey;if(null==l)V.getType(t)===i.type&&this._traverseSelections(i,t,r);else{var n=r.hasOwnProperty(l),o=V.getType(t),c=U(o),R=this._recordSource.get(c);null==R&&(R=V.create(c,B),this._recordSource.set(c,R)),V.setValue(R,l,n),n&&this._traverseSelections(i,t,r)}break;case A:var L=i.abstractKey,k=r.hasOwnProperty(L),N=V.getType(t),P=U(N),O=this._recordSource.get(P);null==O&&(O=V.create(P,B),this._recordSource.set(P,O)),V.setValue(O,L,k);break;case b:case T:var F=i.args?K(i.args,this._variables):{},z=Y(i,this._variables),M=w(i,this._variables);this._handleFieldPayloads.push({args:F,dataID:V.getDataID(t),fieldKey:z,handle:i.handle,handleKey:M,handleArgs:i.handleArgs?K(i.handleArgs,this._variables):{}});break;case I:this._normalizeModuleImport(i,t,r);break;case p:this._normalizeDefer(i,t,r);break;case S:this._normalizeStream(i,t,r);break;case u:var x=this._isClientExtension;this._isClientExtension=!0,this._traverseSelections(i,t,r),this._isClientExtension=x;break;case h:if(!1===this._shouldProcessClientComponents)break;this._traverseSelections(i.fragment,t,r);break;case _:this._normalizeActorChange(i,t,r);break;case D:case m:this._normalizeResolver(i,t,r);break;case d:this._normalizeResolver(i.backingField,t,r);break;default:G(!1)}}},t._normalizeResolver=function(e,t,r){null!=e.fragment&&this._traverseSelections(e.fragment,t,r)},t._normalizeDefer=function(e,t,r){!1===(null===e.if||this._getVariableValue(e.if))?this._traverseSelections(e,t,r):this._incrementalPlaceholders.push({kind:"defer",data:r,label:e.label,path:(0,l.default)(this._path),selector:F(e,V.getDataID(t),this._variables),typeName:V.getType(t),actorIdentifier:this._actorIdentifier})},t._normalizeStream=function(e,t,r){this._traverseSelections(e,t,r),!0===(null===e.if||this._getVariableValue(e.if))&&this._incrementalPlaceholders.push({kind:"stream",label:e.label,path:(0,l.default)(this._path),parentID:V.getDataID(t),node:e,variables:this._variables,actorIdentifier:this._actorIdentifier})},t._normalizeModuleImport=function(e,t,r){"object"===a(r)&&r||G(!1);var i=V.getType(t),s=x(e.documentName),n=e.componentModuleProvider||r[s];V.setValue(t,s,null!=n?n:null);var o=H(e.documentName),c=e.operationModuleProvider||r[o];V.setValue(t,o,null!=c?c:null),null!=c&&this._followupPayloads.push({kind:"ModuleImportPayload",args:e.args,data:r,dataID:V.getDataID(t),operationReference:c,path:(0,l.default)(this._path),typeName:i,variables:this._variables,actorIdentifier:this._actorIdentifier})},t._normalizeField=function(e,t,r){"object"===a(r)&&r||G(!1);var i=e.alias||e.name,s=Y(e,this._variables),l=r[i];if(null!=l)if(e.kind===E)V.setValue(t,s,l);else if(e.kind===y){this._path.push(i);var n=this._errorTrie;this._errorTrie=null==n?null:O(n,i),e.plural?this._normalizePluralLink(e,t,s,l):this._normalizeLink(e,t,s,l),this._errorTrie=n,this._path.pop()}else G(!1);else{if(void 0===l){if(this._isClientExtension||this._isUnmatchedAbstractType)return;if(!this._treatMissingFieldsAsNull)return}V.setValue(t,s,null);var o=this._errorTrie;if(null!=o){var c=P(o,i);null!=c&&V.setErrors(t,s,c)}}},t._normalizeActorChange=function(e,t,r){var i,s=e.linkedField;"object"===a(r)&&r||G(!1);var n=s.alias||s.name,c=Y(s,this._variables),_=r[n];if(null!=_){var h=o(_);if(null!=h){var d=null!==(i=s.concreteType)&&void 0!==i?i:this._getRecordType(_),u=this._getDataId(_,d)||V.getLinkedRecordID(t,c)||L(V.getDataID(t),c);"string"!=typeof u&&G(!1),V.setActorLinkedRecordID(t,c,h,u),this._followupPayloads.push({kind:"ActorPayload",data:_,dataID:u,path:[].concat((0,l.default)(this._path),[n]),typeName:d,variables:this._variables,node:s,actorIdentifier:h})}else V.setValue(t,c,null)}else{if(void 0===_){if(this._isClientExtension||this._isUnmatchedAbstractType)return;if(!this._treatMissingFieldsAsNull)return}V.setValue(t,c,null)}},t._normalizeLink=function(e,t,r,i){var s;"object"===a(i)&&i||G(!1);var l=this._getDataId(i,null!==(s=e.concreteType)&&void 0!==s?s:this._getRecordType(i))||V.getLinkedRecordID(t,r)||L(V.getDataID(t),r);"string"!=typeof l&&G(!1),V.setLinkedRecordID(t,r,l);var n=this._recordSource.get(l);if(n);else{var o=e.concreteType||this._getRecordType(i);n=V.create(l,o),this._recordSource.set(l,n)}this._traverseSelections(e,n,i)},t._normalizePluralLink=function(e,t,r,i){var s=this;Array.isArray(i)||G(!1);var l=V.getLinkedRecordIDs(t,r),n=[];i.forEach((function(i,o){var c;if(null!=i){s._path.push(String(o));var _=s._errorTrie;s._errorTrie=null==_?null:O(_,o),"object"!==a(i)&&G(!1);var h=s._getDataId(i,null!==(c=e.concreteType)&&void 0!==c?c:s._getRecordType(i))||l&&l[o]||L(V.getDataID(t),r,o);"string"!=typeof h&&G(!1),n.push(h);var d=s._recordSource.get(h);if(d);else{var u=e.concreteType||s._getRecordType(i);d=V.create(h,u),s._recordSource.set(h,d)}s._traverseSelections(e,d,i),s._errorTrie=_,s._path.pop()}else n.push(i)})),V.setLinkedRecordIDs(t,r,n)},t._validateRecordType=function(e,t,r){var a;null!==(a=t.concreteType)&&void 0!==a||this._getRecordType(r),V.getDataID(e)},t._validateConflictingFieldsWithIdenticalId=function(e,t,r){},t._validateConflictingLinkedFieldsWithIdenticalId=function(e,t,r){},e}();e.exports={normalize:function(e,t,r,a,i){var s=t.dataID,l=t.node,n=t.variables;return new W(e,n,a).normalizeResponse(l,s,r,i)}}}}]);
//# sourceMappingURL=RelayResponseNormalizer.js.js.map?536f7